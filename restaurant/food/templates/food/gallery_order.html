{% extends 'food/base.html' %}
{% block content %}

<div class="container py-5 text-center" style="background:#fffaf3; min-height:100vh;">
  <h2 class="fw-bold mb-4 mt-5" style="color:#b45309; font-family:'Playfair Display', serif;">
    üçΩÔ∏è Order Gallery Item
  </h2>

  <!-- Gallery Item Card -->
  <div class="card mx-auto shadow-lg border-0" 
       style="max-width: 420px; border-radius: 20px; background-color:#ffffff;">
       
    <img src="{{ item.image.url }}" 
         alt="{{ item.caption }}" 
         class="card-img-top rounded-top-4" 
         style="height: 250px; object-fit: cover;">
         
    <div class="card-body px-4 py-4">
      <h4 class="card-title fw-bold mb-2" style="color:#b45309;">{{ item.caption }}</h4>
      <p class="text-muted mb-3">Price per item: ‚Çπ{{ item.price }}</p>

      <form method="POST">
        {% csrf_token %}
        <div class="d-flex justify-content-center align-items-center gap-2 mb-4">
          <button type="button" class="btn btn-outline-secondary rounded-circle fw-bold" 
                  id="minusBtn" style="width:40px; height:40px;">‚àí</button>

          <input type="number" name="quantity" id="quantityInput" value="1" min="1"
                 class="form-control text-center fw-bold border-2"
                 style="width:80px; border-radius:10px;">

          <button type="button" class="btn btn-outline-secondary rounded-circle fw-bold" 
                  id="plusBtn" style="width:40px; height:40px;">+</button>
        </div>

        <p class="fw-semibold fs-5 mb-3">
          Total Price: <span style="color:#b45309;">‚Çπ<span id="totalPrice">{{ item.price }}</span></span>
        </p>

        <button type="submit"
                class="btn btn-warning text-dark fw-semibold w-100 py-2 rounded-pill shadow-sm">
          üõí Confirm Order
        </button>
      </form>
    </div>
  </div>
</div>

<!-- JS for total price update -->
<script>
document.addEventListener("DOMContentLoaded", () => {
  const price = {{ item.price }};
  const qtyInput = document.getElementById("quantityInput");
  const totalPriceEl = document.getElementById("totalPrice");
  const minusBtn = document.getElementById("minusBtn");
  const plusBtn = document.getElementById("plusBtn");

  function updateTotal() {
    let qty = parseInt(qtyInput.value) || 1;
    if (qty < 1) qty = 1;
    totalPriceEl.textContent = (qty * price).toFixed(2);
  }

  minusBtn.addEventListener("click", () => {
    qtyInput.value = Math.max(1, parseInt(qtyInput.value) - 1);
    updateTotal();
  });

  plusBtn.addEventListener("click", () => {
    qtyInput.value = parseInt(qtyInput.value) + 1;
    updateTotal();
  });

  qtyInput.addEventListener("input", updateTotal);
});
</script>

<style>
  body {
    font-family: 'Poppins', sans-serif;
  }
  .card {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }
  .card:hover {
    transform: translateY(-6px);
    box-shadow: 0 1rem 2rem rgba(0,0,0,0.1);
  }
  .btn-warning:hover {
    background-color: #fbbf24 !important;
  }
</style>

{% endblock %}
